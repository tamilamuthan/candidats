{$_(
"
* CandidATS
* Roles Management
*
* Copyright (C) 2014 - 2015 Auieo Software Private Limited, Parent Company of Unicomtech.
* 
* This Source Code Form is subject to the terms of the Mozilla Public
* License, v. 2.0. If a copy of the MPL was not distributed with this
* file, You can obtain one at http://mozilla.org/MPL/2.0/.
")}

<link rel="stylesheet" href="css/bootstrap.min.css" />
<script src="js/angular/angular-touch.js"></script>
<script src="js/angular/angular-animate.js"></script>
<!--<script type="text/javascript" src="js/dragtree.js"></script>-->

<script type="text/javascript">
    jQuery(document).ready(function ()
    {
       jQuery("#fromdate").datepicker(); 
       jQuery("#todate").datepicker();
    });
    var app = angular.module('app', ['ngTouch']);
    app.factory("services", ['\$http', function(\$http) {
  var serviceBase = 'api.php?x='
    var obj = {};
    obj.getRoles = function(){
        return \$http.get(serviceBase + 'roles');
    }
    obj.getRole = function(roleID){
        return \$http.get(serviceBase + 'role&id=' + roleID);
    }

    obj.insertRole = function (rolename,parentid) {
    return \$http.post(serviceBase + 'insertRole', {rolename:rolename,parentid:parentid}).then(function (results) {
        return results;
    });
	};

	obj.updateRole = function (id,role) {
	    return \$http.post(serviceBase + 'updateRole', {id:id, role:role}).then(function (status) {
	        return status.data;
	    });
	};

	obj.deleteRole = function (id) {
	    return \$http.delete(serviceBase + 'deleteRole&id=' + id).then(function (results) {
	        return results;
	    });
	};
        obj.syncRole = function (syncData)
        {
            return \$http.post(serviceBase + 'syncRole', syncData).then(function (results) {
	        return results;
	    });
        };
        obj.login = function (email,pwd)
        {
            return \$http.post(serviceBase + 'login', {email:email, pwd:pwd}).then(function (status) {
	        return status.data;
	    });
        };
    return obj;   
}]);

  app.controller('groupList', function (\$scope, \$rootScope, \$http) {
      
      \$scope.SelectedListItems = [{}];
    \$scope.DefaultListItems = [{}];
    \$scope.AvailableListItems = [{}];
  
  \$scope.selectedProfile="";

   \$scope.loadField = function ()
   {
        alert("====");  
   };

    \$scope.test = 'Email Form';

    \$scope.DefaultListItems = \$rootScope.DefaultListItems;
    \$scope.AvailableListItems = \$rootScope.AvailableListItems;
    
    \$rootScope.loadProfiles=function(profileData)
    {
        \$scope.selectFaIndex = \$scope.FaName = profileData["id"];
    };

    /*\$scope.OnAvailableChange = function () {

        \$scope.AvailLength = \$scope.AvailableListItems.length;
    };*/

    \$scope.SearchButtonClick = function () {
        \$scope.AvailableListItems = [];
        \$scope.SelectedListItems = {};
        \$scope.SelectedSelectedListItems = [];
        \$scope.SelectedAvailItems = [[]];
        \$scope.selectFaIndex = \$scope.FaName = "0";
        angular.copy(\$scope.DefaultListItems, \$scope.AvailableListItems);
    };

    \$scope.btnRight = function () {
        //move selected.
        //add to selected and remove the ones that were moved from the source.
        angular.forEach(\$scope.SelectedAvailItems, function (value, key) {
            for (var i = \$scope.AvailableListItems.length - 1; i >= 0; i--) {
                if (\$scope.AvailableListItems[i].id == value.id) {
                    if(!(\$scope.SelectedListItems && \$scope.SelectedListItems[0])) \$scope.SelectedListItems=[];
                    \$scope.SelectedListItems[\$scope.SelectedListItems.length]=value;
                    \$scope.AvailableListItems.splice(i, 1);
                    jQuery.get("index.php?m=settings&a=groups&s=assign&group="+\$scope.selectFaIndex+"&id="+value.id+"&type="+value.type);
                }
            }
        });
        \$scope.SelectedAvailItems = [];

    };

    \$scope.btnAllRight = function () {
        //add to selected and remove the ones that were moved from the source.       
        for (var i = \$scope.AvailableListItems.length - 1; i >= 0; i--) {
            if(!(\$scope.SelectedListItems && \$scope.SelectedListItems[0])) \$scope.SelectedListItems=[];
            \$scope.SelectedListItems[\$scope.SelectedListItems.length]=\$scope.AvailableListItems[i];
            \$scope.AvailableListItems.splice(i, 1);
        }

    };

    \$scope.btnLeft = function () {
        //remove the ones that were moved from the source container.
        angular.forEach(\$scope.SelectedSelectedListItems, function (value, key) {
            for (var i = \$scope.SelectedListItems.length - 1; i >= 0; i--) {
                if (\$scope.SelectedListItems[i].id == value.id) {
                    if(!(\$scope.AvailableListItems && \$scope.AvailableListItems[0])) \$scope.AvailableListItems=[];
                    \$scope.AvailableListItems[\$scope.SelectedListItems.length]=value;
                    \$scope.SelectedListItems.splice(i, 1);
                    jQuery.get("index.php?m=settings&a=groups&s=remove&group="+\$scope.selectFaIndex+"&id="+value.id+"&type="+value.type);
                }
            }
        });
        \$scope.SelectedSelectedListItems = {};

    };

    \$scope.btnAllLeft = function () {

        //move over all items
        angular.forEach(\$scope.SelectedListItems, function (value, key) {
            this.push(value);
        }, \$scope.AvailableListItems);

        //remove the ones that were moved from the source.           
        for (var i = \$scope.SelectedListItems.length - 1; i >= 0; i--) {
            \$scope.SelectedListItems.splice(i, 1);
        }
        \$scope.SelectedSelectedListItems = {};

    };
  });
  
  
  /*app.controller('listCtrl', function(\$scope, \$rootScope, services) {
    
  });*/

</script>

<div ng-app="app">
    
    <div style="float:left;" ng-controller="groupList">
        

<!--{{ AvailableListItems }}<br /><br />
        {{ SelectedListItems }}<br /><br />-->
<div style="float:left;">
    <div>
        <table><tr><td><b>Base Module : </b>&nbsp;</td><td><input type="radio" ng-click="loadField()" name="basemodule" value="100" /> Candidate |&nbsp;</td><td><input type="radio" name="basemodule" value="200" /> Company |&nbsp;</td><td><input type="radio" name="basemodule" value="300" /> Contact |&nbsp;</td><td><input type="radio" name="basemodule" value="400" /> Joborder </td></tr>
        <tr><td><b>Sub Module : </b>&nbsp;</td><td><input type="checkbox" name="module[]" value="100" /> Candidate |&nbsp;</td><td><input type="checkbox" name="module[]" value="200" /> Company |&nbsp;</td><td><input type="checkbox" name="module[]" value="300" /> Contact |&nbsp;</td><td><input type="checkbox" name="module[]" value="400" /> Joborder </td></tr>
        </table>
    </div>
    <br />
    <div>
        <b>From Date :</b> <input type="text" name="fromdate" id="fromdate" /> | <b>To Date :</b> <input type="text" name="todate" id="todate" />
    </div>
    <br /><br />
    <div>
            <div style="float:left;background-color:#666699"><span style="margin-left:5px;color:white;background-color:#666699;width:250px;">Available</span>
                                <br />
                                <select multiple id="availabelist" size="10" style="width:275px" ng-model="SelectedAvailItems" ng-options="i as i.email for i in AvailableListItems | orderBy:'email'"></select>
                            </div>
            <div style="float:left;height:500px;">
                
                <input id="btnRight" type="button" value="-->" style="width:50px" ng-click="btnRight()" />
                                            <br/>
                                            <input id="btnAllRight" type="button" value="==>" style="width:50px" ng-click="btnAllRight()" />
                                            <br/>
                                            <input id="btnAllLeft" type="button" value="<==" style="width:50px" ng-click="btnAllLeft()" />
                                            <br/>
                                            <input id="btnLeft" type="button" value="<--" style="width:50px" ng-click="btnLeft()" />
                
            </div>
    
                            <div style="float:left;background-color:#666699"><span style="margin-left:5px;color:white;background-color:#666699;width:250px;">Selected</span>
                                <br />
                                <select multiple id="selectedlist" size="10" style="width:275px" ng-model="SelectedSelectedListItems" ng-options="i as i.email for i  in SelectedListItems | orderBy:'email'"></select>
                            </div>
      </div>
</div>      
    </div>
    
    
</div>

    